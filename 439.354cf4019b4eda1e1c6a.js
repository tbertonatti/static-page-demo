(self.webpackChunkkickstart_front=self.webpackChunkkickstart_front||[]).push([[439],{439:(t,e,s)=>{"use strict";s.r(e),s.d(e,{LastResortModule:()=>T});var r=s(1116),o=s(1225),a=s(7727),i=s(5366),n=s(2693);let c=(()=>{class t{constructor(t){this.httpClient=t}handledHttpGet(t){return this.httpClient.get(t).pipe((0,a.K)(t=>200===t.status?"Ok":(0,o._)(t)))}restartHomeAssistant(){return this.handledHttpGet("/api/restart/home-assistant@homeassistant")}restartAdguardHome(){return this.handledHttpGet("/api/restart/AdGuardHome")}rebootRaspberryPi(){return this.handledHttpGet("/api/system/restart")}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(n.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();var l=s(7136),d=s(3337),p=s(9624),u=s(2797),m=s(878),h=s(3835),g=s(2935),f=s(4369);let x=(()=>{class t{constructor(t){this.text=t,this.textFirstWordLowerCase="",this.firstWord=""}ngOnInit(){const t=this.text.split(" ");this.firstWord=t[0],this.textFirstWordLowerCase=[t[0].toLocaleLowerCase(),...t.slice(1)].join(" ")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(g.WI))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-confirmation-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-raised-button","",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(t,e){1&t&&(i.TgZ(0,"h2",0),i._uU(1),i.qZA(),i.TgZ(2,"mat-dialog-content",1),i.TgZ(3,"p"),i._uU(4),i.qZA(),i.qZA(),i.TgZ(5,"mat-dialog-actions",2),i.TgZ(6,"button",3),i._uU(7,"Cancel"),i.qZA(),i.TgZ(8,"button",4),i._uU(9),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Oqu(e.text),i.xp6(3),i.hij("Are you sure you want to ",e.textFirstWordLowerCase,"?"),i.xp6(2),i.Q6J("mat-dialog-close",!1),i.xp6(2),i.Q6J("mat-dialog-close",!0),i.xp6(1),i.hij(" ",e.firstWord," "))},directives:[g.uh,g.xY,g.H8,f.lW,g.ZT],styles:[""]}),t})(),b=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(g.WI))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-error-dialog"]],decls:9,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-stroked-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(i.TgZ(0,"h2",0),i._uU(1),i.qZA(),i.TgZ(2,"mat-dialog-content",1),i.TgZ(3,"pre"),i._uU(4),i.ALo(5,"json"),i.qZA(),i.qZA(),i.TgZ(6,"mat-dialog-actions",2),i.TgZ(7,"button",3),i._uU(8,"Ok"),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.hij("",e.data.text,": Error result"),i.xp6(3),i.Oqu(i.lcZ(5,2,e.data.error)))},directives:[g.uh,g.xY,g.H8,f.lW,g.ZT],pipes:[r.Ts],styles:[""]}),t})();var Z=s(3589);let A=(()=>{class t{constructor(t,e){this.dialog=t,this._snackBar=e,this.method=(0,m.of)(),this.text="",this.color="primary",this.disabled=!1}confirmDialog(){this.dialog.open(x,{data:this.text,disableClose:!0}).afterClosed().subscribe(t=>{if(t){this.disabled=!0;const t=(t,e,s)=>{this.disabled=!1,this._snackBar.open(t,e).onAction().pipe((0,h.h)(()=>s)).subscribe(()=>{this.dialog.open(b,{data:{text:this.text,error:s},disableClose:!0})})};this.method.subscribe(()=>t("Success","Great"),e=>t("Failed","See details",e))}})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(g.uw),i.Y36(Z.ux))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-confirmation-button"]],inputs:{method:"method",text:"text",color:"color"},decls:2,vars:3,consts:[["mat-button","","mat-flat-button","",1,"confirm-button",3,"color","disabled","click"]],template:function(t,e){1&t&&(i.TgZ(0,"button",0),i.NdJ("click",function(){return e.confirmDialog()}),i._uU(1),i.qZA()),2&t&&(i.Q6J("color",e.color)("disabled",e.disabled),i.xp6(1),i.hij(" ",e.text,"\n"))},directives:[f.lW],styles:[".confirm-button[_ngcontent-%COMP%]{margin-left:10px!important;margin-top:10px!important}"]}),t})();const y=[{path:"",component:(()=>{class t{constructor(t,e){this.lastResort=t,this.titleService=e,this.restartHASS=this.lastResort.restartHomeAssistant(),this.restartADG=this.lastResort.restartAdguardHome(),this.restartRPI=this.lastResort.rebootRaspberryPi()}ngOnInit(){this.titleService.setTitle("Last Resort")}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(c),i.Y36(p.Dx))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-last-resort"]],decls:10,vars:8,consts:[[1,"last-resort-container"],[1,"last-resort-card"],[1,"last-resort-subtitle"],[3,"method","text"],[3,"method","color","text"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"mat-card",1),i.TgZ(2,"mat-card-title"),i._uU(3,"Cut my life into pieces..."),i.qZA(),i.TgZ(4,"mat-card-subtitle",2),i._uU(5," this is my last resort "),i.qZA(),i.TgZ(6,"mat-card-actions"),i._UZ(7,"app-confirmation-button",3),i._UZ(8,"app-confirmation-button",4),i._UZ(9,"app-confirmation-button",4),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(7),i.Q6J("method",e.restartHASS)("text","Restart Home Assistant"),i.xp6(1),i.Q6J("method",e.restartADG)("color","accent")("text","Restart Adguard Home"),i.xp6(1),i.Q6J("method",e.restartRPI)("color","warn")("text","Reboot Raspberry Pi"))},directives:[u.a8,u.n5,u.$j,u.hq,A],styles:[".last-resort-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.last-resort-card[_ngcontent-%COMP%]{max-width:600px;margin:10px}.last-resort-subtitle[_ngcontent-%COMP%]{padding-left:3px}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[d.Bz.forChild(y)],d.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[c],imports:[[r.ez,l.S,_]]}),t})()}}]);