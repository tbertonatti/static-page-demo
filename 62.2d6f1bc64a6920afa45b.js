(self.webpackChunkkickstart_front=self.webpackChunkkickstart_front||[]).push([[62],{2062:(t,i,n)=>{"use strict";n.r(i),n.d(i,{RaspicastModule:()=>W});var e=n(1116),s=n(3971),a=n(3337),o=n(1041),r=n(7570),l=n(5366),u=n(7208),c=n(5770),m=n(9624),d=n(2797),p=n(3589),g=n(5078),h=n(7307),b=n(7064),f=n(4369),Z=n(3695),v=n(6278);function x(t,i){1&t&&(l.TgZ(0,"mat-list-item"),l.TgZ(1,"mat-icon",5),l._uU(2,"remove"),l.qZA(),l.TgZ(3,"div",6),l._uU(4,"No videos on queue"),l.qZA(),l.qZA())}function _(t,i){if(1&t&&l._UZ(0,"img",12),2&t){const t=l.oxw(2);l.Q6J("alt",t.playingItem.title)("src",t.playingItem.thumbnail,l.LSH)}}function q(t,i){if(1&t&&l._UZ(0,"mat-slider",13),2&t){const t=l.oxw(2);l.Q6J("formControl",t.currentPosition)("thumbLabel",!0)("max",t.currentDurationSeconds)("min",0)("step",1)("displayWith",t.formatCurrentPositionString)}}function y(t,i){if(1&t&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.hij(" ",t.progress.position," / ")}}function C(t,i){1&t&&l._UZ(0,"mat-divider")}const w=function(t){return{"list-item-with-thumbnail":t}},T=function(t){return{"inner-list-item-with-thumbnail":t}},A=function(t){return{"song-title":t}},O=function(t){return{"text-muted":!0,"not-live-video":t}};function P(t,i){if(1&t){const t=l.EpF();l.TgZ(0,"mat-list-item",3),l.TgZ(1,"div",7),l.YNc(2,_,1,2,"img",8),l.qZA(),l.TgZ(3,"mat-list-item",3),l.TgZ(4,"button",9),l.NdJ("click",function(){return l.CHM(t),l.oxw().togglePlay()}),l.TgZ(5,"mat-icon"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"div",10),l._uU(8),l.qZA(),l.YNc(9,q,1,6,"mat-slider",11),l.TgZ(10,"div",10),l._uU(11),l.YNc(12,y,2,1,"span",1),l._uU(13),l.qZA(),l.qZA(),l.YNc(14,C,1,0,"mat-divider",1),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("ngClass",l.VKq(13,w,t.playingItem.thumbnail)),l.xp6(2),l.Q6J("ngIf",t.playingItem.thumbnail),l.xp6(1),l.Q6J("ngClass",l.VKq(15,T,t.playingItem.thumbnail)),l.xp6(1),l.Q6J("disabled",t.disabled||!t.playingItem.durationString),l.xp6(2),l.Oqu(t.playingItem.icon),l.xp6(1),l.Q6J("ngClass",l.VKq(17,A,t.currentDurationSeconds&&t.playingItem.durationString)),l.xp6(1),l.hij(" ",t.playingItem.title," "),l.xp6(1),l.Q6J("ngIf",t.currentDurationSeconds&&t.playingItem.durationString),l.xp6(1),l.Q6J("ngClass",l.VKq(19,O,t.currentDurationSeconds&&t.playingItem.durationString)),l.xp6(1),l.hij(" ",t.playingItem.status," \xa0\xa0\xa0\xa0|\xa0\xa0\xa0\xa0 "),l.xp6(1),l.Q6J("ngIf",t.progress.position&&t.playingItem.durationString),l.xp6(1),l.hij(" ",t.playingItem.durationString||"live video"," "),l.xp6(1),l.Q6J("ngIf",t.queue.length)}}function I(t,i){if(1&t&&l._UZ(0,"img",12),2&t){const t=l.oxw().$implicit;l.Q6J("alt",t.title)("src",t.thumbnail,l.LSH)}}const k=function(t){return{"list-item-with-thumbnail-queue":t}},M=function(t){return{"inner-list-item-with-thumbnail-queue":t}};function J(t,i){if(1&t&&(l.TgZ(0,"mat-list-item",3),l.TgZ(1,"div",14),l.YNc(2,I,1,2,"img",8),l.qZA(),l.TgZ(3,"mat-list-item",3),l.TgZ(4,"mat-icon",5),l._uU(5),l.qZA(),l.TgZ(6,"div",6),l._uU(7),l.qZA(),l.TgZ(8,"div",15),l._uU(9),l.qZA(),l.qZA(),l.qZA()),2&t){const t=i.$implicit,n=l.oxw();l.Q6J("ngClass",l.VKq(7,k,t.thumbnail)),l.xp6(2),l.Q6J("ngIf",t.thumbnail),l.xp6(1),l.Q6J("ngClass",l.VKq(9,M,n.playingItem.thumbnail)),l.xp6(2),l.Oqu(t.icon),l.xp6(2),l.Oqu(t.title),l.xp6(2),l.AsE(" ",t.status,"\xa0\xa0\xa0\xa0|\xa0\xa0\xa0\xa0 ",t.durationString||"live video"," ")}}const V=function(t){return{"items-container":!0,"items-container-thumbnail":t}};let U=(()=>{class t{constructor(t,i,n){this.raspicast=t,this._snackBar=i,this.cdr=n,this.playingItem={status:"",title:""},this.progress={position:"",progress:0},this.currentPosition=new o.NI({value:0,disabled:!0}),this.currentDurationSeconds=0,this.subs=new r.w,this.disabled=!0,this.queue=[],this.iconsMap={paused:"play_arrow",playing:"pause",downloading:"cloud_download","queue for play":"queue_music","queue for download":"cloud_queue"},this.formatCurrentPositionString=(t,i=!1)=>{var n;return this.raspicast.formatDuration(i?t:1e3*t,Number(null===(n=this.playingItem.durationString)||void 0===n?void 0:n.length)>5)}}ngOnInit(){const t=this.raspicast.list.subscribe(t=>{this.processList(t)},t=>{console.log(t),this._snackBar.open("Failed to retrieve list","Ok"),this.processList([])}),i=this.currentPosition.valueChanges.subscribe(t=>this.raspicast.setPosition(t)),n=this.raspicast.position.subscribe(t=>this.processPosition(t)),e=this.raspicast.actions.subscribe(t=>{this.disabled=!t,this.currentPosition[t?"enable":"disable"]({emitEvent:!1}),this.cdr.detectChanges()});this.subs.add(i),this.subs.add(t),this.subs.add(n),this.subs.add(e)}ngOnDestroy(){this.subs.unsubscribe()}togglePlay(){this.raspicast["paused"===this.playingItem.status?"resume":"pause"]()}processPosition(t){void 0!==this.playingItem.duration&&(this.progress={position:this.formatCurrentPositionString(this.playingItem.duration*t,!0),progress:100*t},this.currentPosition.patchValue(t*this.currentDurationSeconds,{emitEvent:!1})),this.cdr.detectChanges()}processList(t){const i=t.map(t=>Object.assign(Object.assign({},t),{durationString:t.duration?this.raspicast.formatDuration(t.duration):"",icon:this.iconsMap[String(t.status)]})),n=i.length&&["playing","paused"].includes(i[0].status);if(n){const t=i.shift();this.playingItem=t||this.playingItem}else this.playingItem={status:"",title:""};this.currentDurationSeconds=n?Number(this.playingItem.duration)/1e3:0,this.queue=i,this.cdr.detectChanges()}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(u.H),l.Y36(p.ux),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-list"]],decls:8,vars:6,consts:[["mat-subheader",""],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["mat-list-icon",""],["mat-line",""],[1,"song-thumbnail"],[3,"alt","src",4,"ngIf"],["mat-icon-button","","mat-list-icon","","color","primary",3,"disabled","click"],["mat-line","",3,"ngClass"],["mat-line","","class","volume-slider","color","primary","aria-labelledby","position",3,"formControl","thumbLabel","max","min","step","displayWith",4,"ngIf"],[3,"alt","src"],["mat-line","","color","primary","aria-labelledby","position",1,"volume-slider",3,"formControl","thumbLabel","max","min","step","displayWith"],[1,"song-thumbnail-queue"],["mat-line","",1,"text-muted"]],template:function(t,i){1&t&&(l.TgZ(0,"mat-card"),l.TgZ(1,"mat-list"),l.TgZ(2,"div",0),l._uU(3,"Videos"),l.qZA(),l.YNc(4,x,5,0,"mat-list-item",1),l.YNc(5,P,15,21,"mat-list-item",2),l.TgZ(6,"div",3),l.YNc(7,J,10,11,"mat-list-item",4),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngIf",!i.queue.length&&!i.playingItem.status),l.xp6(1),l.Q6J("ngIf",i.playingItem.status),l.xp6(1),l.Q6J("ngClass",l.VKq(4,V,i.playingItem.thumbnail)),l.xp6(1),l.Q6J("ngForOf",i.queue))},directives:[d.a8,g.i$,g.gs,e.O5,e.mk,e.sg,g.Tg,h.Hw,g.Nh,b.X2,f.lW,Z.pH,o.JJ,o.oH,v.d],styles:["mat-list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-top:-20px}.text-muted.not-live-video[_ngcontent-%COMP%]{padding-bottom:30px!important}.text-muted[_ngcontent-%COMP%]{color:#6c757d!important;margin-left:8px!important}.items-container[_ngcontent-%COMP%]{max-height:40vh;overflow:auto}.items-container-thumbnail[_ngcontent-%COMP%]{margin-top:5px}.song-thumbnail[_ngcontent-%COMP%]{border-radius:initial!important;height:auto!important;width:auto!important}.list-item-with-thumbnail[_ngcontent-%COMP%]{height:210px!important}.song-thumbnail-queue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:initial!important;height:88px!important;width:auto!important}.list-item-with-thumbnail-queue[_ngcontent-%COMP%]{height:100px!important}.song-title[_ngcontent-%COMP%]{padding-top:10px!important}mat-slider[_ngcontent-%COMP%]{overflow:visible!important;margin-top:10px!important}  .mat-slider-wrapper .mat-slider-thumb-container .mat-slider-thumb-label{width:50px;height:50px;top:-62px;right:-25px}@media only screen and (max-width:1440px){.song-thumbnail[_ngcontent-%COMP%]{text-align:center}.song-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.list-item-with-thumbnail[_ngcontent-%COMP%]{height:313px!important}.list-item-with-thumbnail[_ngcontent-%COMP%]     .mat-list-item-content{display:block!important}.inner-list-item-with-thumbnail[_ngcontent-%COMP%]     .mat-list-item-content{margin-top:20px;display:flex!important}.list-item-with-thumbnail-queue[_ngcontent-%COMP%]     .mat-list-item-content{padding:0!important}.inner-list-item-with-thumbnail-queue[_ngcontent-%COMP%]{max-width:calc(100% - 158px)}.song-thumbnail-queue[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:88px!important}}@media only screen and (min-width:1200px){.items-container[_ngcontent-%COMP%]{max-height:65vh}}"],changeDetection:0}),t})();var Q=n(398),S=n(9996),N=n(3835),j=function(t){return t.muted="volume_off",t.low="volume_mute",t.medium="volume_down",t.high="volume_up",t}({});let Y=(()=>{class t{constructor(t){this.raspicast=t,this.lastVolume=100,this.subs=new r.w,this.playingVideo=!1,this.disabled=!0,this.currentVolume=new o.NI({value:100,disabled:!0}),this.volumeIcon=j.high,this.next=()=>this.raspicast.next(),this.quit=()=>this.raspicast.quit(),this.pause=()=>this.raspicast.pause(),this.play=()=>this.raspicast.resume(),this.setVolume=(t=!0)=>{this.volumeIcon=this.currentVolume.value?this.currentVolume.value<24?j.low:this.currentVolume.value<49?j.medium:j.high:j.muted,t&&this.raspicast.setVolume(this.currentVolume.value/100*255)},this.toggleVolume=()=>{this.currentVolume.value?(this.lastVolume=this.currentVolume.value,this.currentVolume.patchValue(0)):this.currentVolume.patchValue(this.lastVolume),this.setVolume()}}ngOnInit(){const t=this.currentVolume.valueChanges.subscribe(()=>this.setVolume()),i=this.raspicast.list.subscribe(t=>{this.playingVideo=!!t.length&&Boolean(["playing","paused"].includes(t[0].status)&&t[0].duration)}),n=this.raspicast.volume.pipe((0,S.U)(t=>Math.round(t/255*100)),(0,N.h)(t=>this.currentVolume.value!==t)).subscribe(t=>{this.currentVolume.patchValue(t,{emitEvent:!1}),this.setVolume(!1)}),e=this.raspicast.actions.subscribe(t=>{this.disabled=!t,this.currentVolume[t?"enable":"disable"]({emitEvent:!1})});this.subs.add(i),this.subs.add(e),this.subs.add(t),this.subs.add(n)}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(u.H))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-buttons"]],decls:18,vars:11,consts:[[1,"btns-container"],["mat-icon-button","","color","primary",3,"disabled","click"],["color","primary","aria-labelledby","volume",1,"volume-slider",3,"formControl","thumbLabel","max","min","step"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return i.toggleVolume()}),l.TgZ(2,"mat-icon"),l._uU(3),l.qZA(),l.qZA(),l._UZ(4,"mat-slider",2),l.qZA(),l.TgZ(5,"div",0),l.TgZ(6,"button",1),l.NdJ("click",function(){return i.pause()}),l.TgZ(7,"mat-icon"),l._uU(8,"pause"),l.qZA(),l.qZA(),l.TgZ(9,"button",1),l.NdJ("click",function(){return i.play()}),l.TgZ(10,"mat-icon"),l._uU(11,"play_arrow"),l.qZA(),l.qZA(),l.TgZ(12,"button",1),l.NdJ("click",function(){return i.next()}),l.TgZ(13,"mat-icon"),l._uU(14,"fast_forward"),l.qZA(),l.qZA(),l.TgZ(15,"button",1),l.NdJ("click",function(){return i.quit()}),l.TgZ(16,"mat-icon"),l._uU(17,"stop"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("disabled",i.disabled),l.xp6(2),l.Oqu(i.volumeIcon),l.xp6(1),l.Q6J("formControl",i.currentVolume)("thumbLabel",!0)("max",100)("min",0)("step",1),l.xp6(2),l.Q6J("disabled",i.disabled||!i.playingVideo),l.xp6(3),l.Q6J("disabled",i.disabled||!i.playingVideo),l.xp6(3),l.Q6J("disabled",i.disabled),l.xp6(3),l.Q6J("disabled",i.disabled))},directives:[f.lW,h.Hw,Z.pH,o.JJ,o.oH],styles:[".btns-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:10px;align-items:center}.volume-slider[_ngcontent-%COMP%]{width:calc(100% - 100px)}"]}),t})();var D=n(7070),H=n(2312);function L(t,i){1&t&&(l.TgZ(0,"mat-card-footer"),l._UZ(1,"mat-progress-bar",14),l.qZA())}const F=[{path:"",component:(()=>{class t{constructor(t,i,n){this.raspicast=t,this.dfs=i,this.titleService=n,this.list=[],this.subs=new r.w,this.status="",this.listLoading=!1,this.casting=!1,this.obj={link:{_value:"",_label:"Link",_validators:[o.kI.required],_clear:!0,_onEnter:()=>this.cast()}},this.form=new o.cw({})}ngOnInit(){this.titleService.setTitle("Raspicast");const t=this.dfs.createFormFromObj(this.obj);this.form=t[0];const i=this.raspicast.castResult.subscribe(t=>this.procesCastResult(t),t=>{console.log(t),this.casting=!1}),n=this.raspicast.status.subscribe(t=>this.status=t);this.subs.add(i),this.subs.add(n)}ngOnDestroy(){this.subs.unsubscribe()}procesCastResult(t){var i,n,e;this.casting=!1,"ok"===t.msg?(null===(i=this.form.get("link"))||void 0===i||i.patchValue("",{emitEvent:!1}),null===(n=this.form.get("link"))||void 0===n||n.setErrors(null)):null===(e=this.form.get("link"))||void 0===e||e.setErrors({custom:"No video found"})}cast(){var t;if(null===(t=this.form.get("link"))||void 0===t?void 0:t.valid){const{link:t}=this.form.value;this.casting=!0,this.raspicast.cast(t)}}download(){var t;if(null===(t=this.form.get("link"))||void 0===t?void 0:t.valid){const{link:t}=this.form.value;this.casting=!0,this.raspicast.download(t)}}}return t.\u0275fac=function(i){return new(i||t)(l.Y36(u.H),l.Y36(c.w),l.Y36(m.Dx))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-asd"]],decls:31,vars:9,consts:[[1,"card-container"],[3,"ngClass"],[1,"master-container"],[1,"list-container"],[1,"control-container"],[3,"parentForm","formToUse","objToUse"],["before",""],["after",""],[1,"cast-btn-container"],["mat-flat-button","","color","primary","aria-label","cast menu",3,"disabled","matMenuTriggerFor"],["mat-flat-button","","color","primary","aria-label","Cast video",1,"cast-video-button",3,"disabled","click"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngIf"],["mode","indeterminate"]],template:function(t,i){if(1&t&&(l.TgZ(0,"mat-card",0),l.TgZ(1,"mat-card-header",1),l.TgZ(2,"mat-card-title"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"mat-card-content",2),l.TgZ(5,"div",3),l._UZ(6,"app-list"),l.qZA(),l.TgZ(7,"div",4),l.TgZ(8,"app-dynamic-form",5),l.TgZ(9,"div",6),l._UZ(10,"app-buttons"),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"div",8),l.TgZ(13,"button",9),l.TgZ(14,"mat-icon"),l._uU(15,"expand_more"),l.qZA(),l.qZA(),l.TgZ(16,"button",10),l.NdJ("click",function(){return i.cast()}),l._uU(17," Cast "),l.qZA(),l.TgZ(18,"mat-menu",null,11),l.TgZ(20,"button",12),l.NdJ("click",function(){return i.cast()}),l.TgZ(21,"mat-icon"),l._uU(22,"cast"),l.qZA(),l.TgZ(23,"span"),l._uU(24,"Cast"),l.qZA(),l.qZA(),l.TgZ(25,"button",12),l.NdJ("click",function(){return i.download()}),l.TgZ(26,"mat-icon"),l._uU(27,"download"),l.qZA(),l.TgZ(28,"span"),l._uU(29,"Download"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(30,L,2,0,"mat-card-footer",13),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.MAs(19);l.xp6(1),l.Q6J("ngClass",i.status),l.xp6(2),l.hij("Connection: ",i.status,""),l.xp6(5),l.Q6J("parentForm",!0)("formToUse",i.form)("objToUse",i.obj),l.xp6(5),l.Q6J("disabled",i.casting||!i.form.controls.link.value||!i.form.controls.link.valid||"connected"!==i.status)("matMenuTriggerFor",t),l.xp6(3),l.Q6J("disabled",i.casting||!i.form.controls.link.value||!i.form.controls.link.valid||"connected"!==i.status),l.xp6(14),l.Q6J("ngIf",i.casting)}},directives:[d.a8,d.dk,e.mk,d.n5,d.dn,U,Q.r,Y,f.lW,D.p6,h.Hw,D.VK,D.OP,e.O5,d.rt,H.pW],styles:[".card-container[_ngcontent-%COMP%]{min-width:420px}.master-container[_ngcontent-%COMP%]{min-width:400px}mat-card-header.connected[_ngcontent-%COMP%]{display:none}mat-card-header.disconnected[_ngcontent-%COMP%]{color:red}mat-card-header.reconnecting[_ngcontent-%COMP%]{color:orange}.cast-video-button[_ngcontent-%COMP%]{right:-15px}.cast-btn-container[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:row-reverse;margin-bottom:10px}@media only screen and (min-width:1200px){.master-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:space-around}.list-container[_ngcontent-%COMP%]{display:inline-block;width:60%}.control-container[_ngcontent-%COMP%]{display:inline-block;width:40%}}"]}),t})()}];let E=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild(F)],a.Bz]}),t})();var B=n(107);const K={url:"/",options:{path:"/api/socket.io"}};let W=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[u.H],imports:[[e.ez,E,B.m,s.HB.forRoot(K)]]}),t})()}}]);