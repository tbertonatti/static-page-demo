(self.webpackChunkkickstart_front=self.webpackChunkkickstart_front||[]).push([[117],{117:(t,e,n)=>{"use strict";n.r(e),n.d(e,{TwitchTokenModule:()=>j});var o=n(1116),i=n(3337);function r(t,e,n,o,i,r,c){try{var a=t[r](c),s=a.value}catch(l){return void n(l)}a.done?e(s):Promise.resolve(s).then(o,i)}var c=n(1041),a=n(1053),s=n(5366),l=n(5770),d=n(878),u=n(2693);let h=(()=>{class t{constructor(t){this.http=t}getCode(t){const{client_id:e,redirect_uri:n,scope:o,state:i}=t,r=new URLSearchParams(Object.assign(Object.assign({},{client_id:e,redirect_uri:n,state:i,response_type:"code"}),{scope:o.join(" ")}));localStorage.setItem("client",JSON.stringify(t)),window.location.href=`https://id.twitch.tv/oauth2/authorize?${r.toString()}`}getTokens(t,e){const n=JSON.parse(localStorage.getItem("client")||""),{client_id:o,client_secret:i,redirect_uri:r,state:c}=n,a={client_id:o,client_secret:i,redirect_uri:r,code:t,grant_type:"authorization_code"};return c!==e?(0,d.of)({error:"Invalid state"}):this.http.post("https://id.twitch.tv/oauth2/token",a,{params:a})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(u.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})();var g=n(6902),f=n(9624),p=n(2797),m=n(2312),_=n(398),b=n(4369);function k(t,e){if(1&t){const t=s.EpF();s.ynx(0),s.TgZ(1,"button",7),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).backToHome()}),s._uU(2,"back to home"),s.qZA(),s.TgZ(3,"pre"),s._uU(4),s.ALo(5,"json"),s.qZA(),s.BQk()}if(2&t){const t=s.oxw(2);s.xp6(4),s.Oqu(s.lcZ(5,1,t.tokens))}}function v(t,e){1&t&&(s.TgZ(0,"div",8),s.TgZ(1,"p",9),s._uU(2,"loading..."),s.qZA(),s.qZA())}function w(t,e){1&t&&(s.TgZ(0,"mat-card-footer"),s._UZ(1,"mat-progress-bar",10),s.qZA())}function x(t,e){if(1&t&&(s.ynx(0),s.TgZ(1,"mat-card",3),s.TgZ(2,"mat-card-content",4),s.YNc(3,k,6,3,"ng-container",1),s.YNc(4,v,3,0,"ng-template",null,5,s.W1O),s.qZA(),s.YNc(6,w,2,0,"mat-card-footer",6),s.qZA(),s.BQk()),2&t){const t=s.MAs(5),e=s.oxw();s.xp6(3),s.Q6J("ngIf",!e.loading)("ngIfElse",t),s.xp6(3),s.Q6J("ngIf",e.loading)}}function y(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"app-dynamic-form",11),s.TgZ(1,"div",12),s.TgZ(2,"button",13),s.NdJ("click",function(){return s.CHM(t),s.oxw().getCode()}),s._uU(3," Submit "),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("parentForm",!0)("formToUse",t.form)("objToUse",t.formObj),s.xp6(2),s.Q6J("disabled",!t.form.valid)}}const T=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,r){this.route=t,this.dynFormService=e,this.twitch=n,this.util=o,this.titleService=i,this.router=r,this.code="",this.loading=!1,this.tokens={},this.formObj={_label:"Twitch Token Generator",client_id:{_label:"Client Id",_value:"s54kk70x3bnd61zcxczst1lj103f8z",_validators:[c.kI.required]},client_secret:{_label:"Client Secret",_value:"9683rz2swd0ff9ryzxtyybfi6hgzjc",_validators:[c.kI.required]},redirect_uri:{_label:"Redirect URI",_validators:[c.kI.required],_value:"http://localhost:4200",_cols:2},scope:{_cols:2,_label:"Scopes",_model:{_label:"Scope",_value:"",_validators:[c.kI.required]},_value:["channel:manage:vips","channel:manage:broadcast","channel:moderate","channel:read:redemptions","chat:edit","chat:read","moderation:read","moderator:manage:announcements","moderator:read:followers"],_validators:[(0,a.x$)(t=>t.value.length?null:{minlength:{requiredLength:1}})]}},this.form=new c.cw({})}ngOnInit(){this.titleService.setTitle("Twitch Token Generator"),this.init()}init(){this.code=this.route.snapshot.queryParamMap.get("code")||"";const t=this.route.snapshot.queryParamMap.get("state")||"";if(this.code){const e=t=>{const e={};Object.keys(t).forEach(n=>{e[this.util.camelize(n)]=t[n]}),this.tokens=e,this.loading=!1};this.loading=!0,this.twitch.getTokens(this.code,t).subscribe(t=>e(t),t=>e(t))}else{const t=this.dynFormService.createFormFromObj(this.formObj,2);this.form=t[0],this.formObj=t[1]}}getCode(){this.twitch.getCode(Object.assign(Object.assign({},this.form.value),{state:""}))}backToHome(){var t,e=this;return(t=function*(){yield e.router.navigate([""]),e.init()},function(){var e=this,n=arguments;return new Promise(function(o,i){var c=t.apply(e,n);function a(t){r(c,o,i,a,s,"next",t)}function s(t){r(c,o,i,a,s,"throw",t)}a(void 0)})})()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(i.gz),s.Y36(l.w),s.Y36(h),s.Y36(g.f),s.Y36(f.Dx),s.Y36(i.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-twitch-token"]],decls:4,vars:2,consts:[[1,"twitch-token-generator-container"],[4,"ngIf","ngIfElse"],["needCode",""],[1,"twitch-token-generator-card"],[1,"twitch-token-generator-card-content"],["loadingSpinner",""],[4,"ngIf"],[3,"click"],[1,"loading-text-container"],[1,"loading-text"],["mode","indeterminate"],[1,"twitch-token-generator-card",3,"parentForm","formToUse","objToUse"],["after","",1,"submit-btn"],["button","","mat-raised-button","","color","primary","type","button",3,"disabled","click"]],template:function(t,e){if(1&t&&(s.TgZ(0,"div",0),s.YNc(1,x,7,3,"ng-container",1),s.YNc(2,y,4,4,"ng-template",null,2,s.W1O),s.qZA()),2&t){const t=s.MAs(3);s.xp6(1),s.Q6J("ngIf",e.code)("ngIfElse",t)}},directives:[o.O5,p.a8,p.dn,p.rt,m.pW,_.r,b.lW],pipes:[o.Ts],styles:[".twitch-token-generator-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.twitch-token-generator-card[_ngcontent-%COMP%]{width:600px;margin:10px}.twitch-token-generator-card-content[_ngcontent-%COMP%]{overflow:auto}.loading-text-container[_ngcontent-%COMP%]{height:50px;display:flex;align-content:center;align-items:center}.loading-text[_ngcontent-%COMP%]{font-size:30px}.submit-btn[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:column;margin-bottom:10px;margin-top:10px}"]}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.Bz.forChild(T)],i.Bz]}),t})();var O=n(107);let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[h],imports:[[o.ez,Z,O.m]]}),t})()}}]);